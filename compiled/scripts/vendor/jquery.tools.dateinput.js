/**
 * @license                                     
 * jQuery Tools @VERSION Dateinput - <input type="date" /> for humans
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/form/dateinput/
 *
 * Since: Mar 2010
 * Date: @DATE 
 */

!function(e,t){function a(e,t){return new Date(e,t+1,0).getDate()}function n(e,t){for(e=""+e,t=t||2;e.length<t;)e="0"+e;return e}function r(e,t,a,r){var d=t.getDate(),i=t.getDay(),o=t.getMonth(),s=t.getFullYear(),u={d:d,dd:n(d),ddd:h[r].shortDays[i],dddd:h[r].days[i],m:o+1,mm:n(o+1),mmm:h[r].shortMonths[o],mmmm:h[r].months[o],yy:String(s).slice(2),yyyy:s},f=l[e](a,t,u,r);return y.html(f).html()}function d(e){return parseInt(e,10)}function i(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}function o(e){if(e!==t){if(e.constructor==Date)return e;if("string"==typeof e){var a=e.split("-");if(3==a.length)return new Date(d(a[0]),d(a[1])-1,d(a[2]));if(!/^-?\d+$/.test(e))return;e=d(e)}var n=new Date;return n.setDate(n.getDate()+e),n}}function s(n,s){function u(t,a,d){q=t,v=t.getFullYear(),m=t.getMonth(),D=t.getDate(),d||(d=e.Event("api")),"click"==d.type&&e.support.changeBubbles&&n.focus(),d.type="beforeChange",N.trigger(d,[t]),d.isDefaultPrevented()||(n.val(r(a.formatter,t,a.format,a.lang)),d.type="change",N.trigger(d),n.data("date",t),b.hide(d))}function l(t){t.type="onShow",N.trigger(t),e(document).on("keydown.d",function(t){if(t.ctrlKey)return!0;var a=t.keyCode;if(8==a||46==a)return n.val(""),b.hide(t);if(27==a||9==a)return b.hide(t);if(e(c).index(a)>=0){if(!w)return b.show(t),t.preventDefault();var r=e("#"+C.weeks+" a"),d=e("."+C.focus),i=r.index(d);return d.removeClass(C.focus),74==a||40==a?i+=7:75==a||38==a?i-=7:76==a||39==a?i+=1:(72==a||37==a)&&(i-=1),i>41?(b.addMonth(),d=e("#"+C.weeks+" a:eq("+(i-42)+")")):0>i?(b.addMonth(-1),d=e("#"+C.weeks+" a:eq("+(i+42)+")")):d=r.eq(i),d.addClass(C.focus),t.preventDefault()}return 34==a?b.addMonth():33==a?b.addMonth(-1):36==a?b.today():(13==a&&(e(t.target).is("select")||e("."+C.focus).click()),e([16,17,18,9]).index(a)>=0)}),e(document).on("click.d",function(t){var a=t.target;e(a).parents("#"+C.root).length||a==n[0]||y&&a==y[0]||b.hide(t)})}var y,g,p,v,m,D,w,k,b=this,x=new Date,M=x.getFullYear(),C=s.css,F=h[s.lang],S=e("#"+C.root),V=S.find("#"+C.title),q=n.attr("data-value")||s.value||n.val(),A=n.attr("min")||s.min,Y=n.attr("max")||s.max;if(0===A&&(A="0"),q=o(q)||x,A=o(A||new Date(M+s.yearRange[0],1,1)),Y=o(Y||new Date(M+s.yearRange[1]+1,1,-1)),!F)throw"Dateinput: invalid language: "+s.lang;if("date"==n.attr("type")){var k=n.clone(),J=k.wrap("<div/>").parent().html(),R=e(J.replace(/type/i,"type=text data-orig-type"));s.value&&R.val(s.value),n.replaceWith(R),n=R}n.addClass(C.input);var N=n.add(b);if(!S.length){if(S=e("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",C.root),S.children().eq(0).attr("id",C.head).end().eq(1).attr("id",C.body).children().eq(0).attr("id",C.days).end().eq(1).attr("id",C.weeks).end().end().end().find("a").eq(0).attr("id",C.prev).end().eq(1).attr("id",C.next),V=S.find("#"+C.head).find("div").attr("id",C.title),s.selectors){var O=e("<select/>").attr("id",C.month),T=e("<select/>").attr("id",C.year);V.html(O.add(T))}for(var E=S.find("#"+C.days),I=0;7>I;I++)E.append(e("<span/>").text(F.shortDays[(I+s.firstDay)%7]));e("body").append(S)}s.trigger&&(y=e("<a/>").attr("href","#").addClass(C.trigger).click(function(e){return s.toggle?b.toggle():b.show(),e.preventDefault()}).insertAfter(n));var K=S.find("#"+C.weeks);T=S.find("#"+C.year),O=S.find("#"+C.month),e.extend(b,{show:function(t){if(!(n.attr("readonly")||n.attr("disabled")||w||(t=t||e.Event(),t.type="onBeforeShow",N.trigger(t),t.isDefaultPrevented()))){e.each(f,function(){this.hide()}),w=!0,O.off("change").change(function(){b.setValue(d(T.val()),d(e(this).val()))}),T.off("change").change(function(){b.setValue(d(e(this).val()),d(O.val()))}),g=S.find("#"+C.prev).off("click").click(function(){return g.hasClass(C.disabled)||b.addMonth(-1),!1}),p=S.find("#"+C.next).off("click").click(function(){return p.hasClass(C.disabled)||b.addMonth(),!1}),b.setValue(q);var a=n.offset();return/iPad/i.test(navigator.userAgent)&&(a.top-=e(window).scrollTop()),S.css({top:a.top+n.outerHeight(!0)+s.offset[0],left:a.left+s.offset[1]}),s.speed?S.show(s.speed,function(){l(t)}):(S.show(),l(t)),b}},setValue:function(n,r,f){var l=d(r)>=-1?new Date(d(n),d(r),d(f==t||isNaN(f)?1:f)):n||q;if(A>l?l=A:l>Y&&(l=Y),"string"==typeof n&&(l=o(n)),n=l.getFullYear(),r=l.getMonth(),f=l.getDate(),-1==r?(r=11,n--):12==r&&(r=0,n++),!w)return u(l,s),b;m=r,v=n,D=f;var c,h=new Date(n,r,1-s.firstDay),y=h.getDay(),k=a(n,r),M=a(n,r-1);if(s.selectors){O.empty(),e.each(F.months,function(t,a){A<new Date(n,t+1,1)&&Y>new Date(n,t,0)&&O.append(e("<option/>").html(a).attr("value",t))}),T.empty();for(var S=x.getFullYear(),J=S+s.yearRange[0];J<S+s.yearRange[1];J++)A<new Date(J+1,0,1)&&Y>new Date(J,0,0)&&T.append(e("<option/>").text(J));O.val(r),T.val(n)}else V.html(F.months[r]+" "+n);K.empty(),g.add(p).removeClass(C.disabled);for(var R,N,E=y?0:-7;(y?42:35)>E;E++)R=e("<a/>"),E%7===0&&(c=e("<div/>").addClass(C.week),K.append(c)),y>E?(R.addClass(C.off),N=M-y+E+1,l=new Date(n,r-1,N)):E>=y+k?(R.addClass(C.off),N=E-k-y+1,l=new Date(n,r+1,N)):(N=E-y+1,l=new Date(n,r,N),i(q,l)?R.attr("id",C.current).addClass(C.focus):i(x,l)&&R.attr("id",C.today)),A&&A>l&&R.add(g).addClass(C.disabled),Y&&l>Y&&R.add(p).addClass(C.disabled),R.attr("href","#"+N).text(N).data("date",l),c.append(R);return K.find("a").click(function(t){var a=e(this);return a.hasClass(C.disabled)||(e("#"+C.current).removeAttr("id"),a.attr("id",C.current),u(a.data("date"),s,t)),!1}),C.sunday&&K.find("."+C.week).each(function(){var t=s.firstDay?7-s.firstDay:0;e(this).children().slice(t,t+1).addClass(C.sunday)}),b},setMin:function(e,t){return A=o(e),t&&A>q&&b.setValue(A),b},setMax:function(e,t){return Y=o(e),t&&q>Y&&b.setValue(Y),b},today:function(){return b.setValue(x)},addDay:function(e){return this.setValue(v,m,D+(e||1))},addMonth:function(e){var t=m+(e||1),n=a(v,t),r=n>=D?D:n;return this.setValue(v,t,r)},addYear:function(e){return this.setValue(v+(e||1),m,D)},destroy:function(){n.add(document).off("click.d keydown.d"),S.add(y).remove(),n.removeData("dateinput").removeClass(C.input),k&&n.replaceWith(k)},hide:function(t){if(w){if(t=e.Event(),t.type="onHide",N.trigger(t),t.isDefaultPrevented())return;e(document).off("click.d keydown.d"),S.hide(),w=!1}return b},toggle:function(){return b.isOpen()?b.hide():b.show()},getConf:function(){return s},getInput:function(){return n},getCalendar:function(){return S},getValue:function(e){return e?r(s.formatter,q,e,s.lang):q},isOpen:function(){return w}}),e.each(["onBeforeShow","onShow","change","onHide"],function(t,a){e.isFunction(s[a])&&e(b).on(a,s[a]),b[a]=function(t){return t&&e(b).on(a,t),b}}),s.editable||n.on("focus.d click.d",b.show).keydown(function(t){var a=t.keyCode;return!w&&e(c).index(a)>=0?(b.show(t),t.preventDefault()):((8==a||46==a)&&n.val(""),t.shiftKey||t.ctrlKey||t.altKey||9==a?!0:t.preventDefault())}),o(n.val())&&u(q,s)}e.tools=e.tools||{version:"@VERSION"};var u,f=[],l={},c=[75,76,38,39,74,72,40,37],h={};u=e.tools.dateinput={conf:{format:"mm/dd/yy",formatter:"default",selectors:!1,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:t,max:t,trigger:0,toggle:0,editable:0,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},addFormatter:function(e,t){l[e]=t},localize:function(t,a){e.each(a,function(e,t){a[e]=t.split(",")}),h[t]=a}},u.localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});var y=e("<a/>");u.addFormatter("default",function(e,t,a){return e.replace(/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,function(e){return e in a?a[e]:e})}),u.addFormatter("prefixed",function(e,t,a){return e.replace(/%(d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*')/g,function(e,t){return t in a?a[t]:e})}),e.expr[":"].date=function(t){var a=t.getAttribute("type");return a&&"date"==a||!!e(t).data("dateinput")},e.fn.dateinput=function(t){if(this.data("dateinput"))return this;t=e.extend(!0,{},u.conf,t),e.each(t.css,function(e,a){a||"prefix"==e||(t.css[e]=(t.css.prefix||"")+(a||e))});var a;return this.each(function(){var n=new s(e(this),t);f.push(n);var r=n.getInput().data("dateinput",n);a=a?a.add(r):r}),a?a:this}}(jQuery);