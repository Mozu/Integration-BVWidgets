define("modules/views-collections",["modules/jquery-mozu","underscore","hyprlive","modules/backbone-mozu","modules/models-faceting","modules/views-productlists","modules/views-paging"],function(e,t,a,o,n,d,i){function s(s){var r={},c=new n.FacetedProductCollection(s.data),l=s.$body.data("mz-category"),u=s.$body.data("mz-search");u&&c.setQuery(u),l&&c.setHierarchy("categoryId",l),t.extend(r,{pagingControls:new i.PagingControls({el:s.$body.find("[data-mz-pagingcontrols]"),model:c}),pageNumbers:new i.PageNumbers({el:s.$body.find("[data-mz-pagenumbers]"),model:c}),pageSort:new i.PageSortView({el:s.$body.find("[data-mz-pagesort]"),model:c}),productList:new d.List({el:s.$body.find("[data-mz-productlist]"),model:c})}),s.$facets.length>0&&(r.facetPanel=new d.FacetingPanel({el:s.$facets,model:c})),o.history.start({pushState:!0,root:window.location.pathname});var g=new o.Router,m=!1;c.on("facetchange",function(e){m||g.navigate(e),m=!1},g),c.on("change:pageSize",c.updateFacets,c),t.invoke(r,"delegateEvents");var f=a.getThemeSetting("defaultPageSize");return g.route("*all","filter",function(){{var a=e.extend({pageSize:f},e.deparam()),o={};c.lastRequest}a.startIndex||(o.resetIndex=!0),c.set(t.pick(a,"pageSize","startIndex","facetValueFilter","sortBy"),{silent:!0}),m=!0,c.updateFacets(o)}),r}return{createFacetedCollectionViews:s}}),define("pages/category",["modules/jquery-mozu","modules/views-collections"],function(e,t){e(document).ready(function(){window.facetingViews=t.createFacetedCollectionViews({$body:e("[data-mz-category]"),$facets:e("[data-mz-facets]"),data:require.mozuData("facetedproducts")})})});